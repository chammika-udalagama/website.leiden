<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Seminar on Using Python in Physics - 14| Vibrational Rotational Spectrum of HCl</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles/specific-optimisations.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../_imgs/sp2273_logo_gray.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Seminar on Using Python in Physics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/about/overview.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/about/instructions.html"> 
<span class="menu-text">Instructions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/about/instructions.html"> 
<span class="menu-text">Content</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#energy-levels" id="toc-energy-levels" class="nav-link" data-scroll-target="#energy-levels">Energy levels</a></li>
  <li><a href="#rotational-energy-levels" id="toc-rotational-energy-levels" class="nav-link" data-scroll-target="#rotational-energy-levels">Rotational Energy levels</a></li>
  <li><a href="#degeneracy-of-states" id="toc-degeneracy-of-states" class="nav-link" data-scroll-target="#degeneracy-of-states">Degeneracy of states</a></li>
  <li><a href="#intensity-of-the-spectrums" id="toc-intensity-of-the-spectrums" class="nav-link" data-scroll-target="#intensity-of-the-spectrums">Intensity of the spectrums</a></li>
  <li><a href="#vibrational-energy-levels" id="toc-vibrational-energy-levels" class="nav-link" data-scroll-target="#vibrational-energy-levels">Vibrational Energy levels</a></li>
  <li><a href="#rotational-vibrational-energy-levels" id="toc-rotational-vibrational-energy-levels" class="nav-link" data-scroll-target="#rotational-vibrational-energy-levels">Rotational Vibrational Energy levels</a></li>
  <li><a href="#data-for-hcl" id="toc-data-for-hcl" class="nav-link" data-scroll-target="#data-for-hcl">Data for HCl</a></li>
  </ul></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks">Tasks</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">14| Vibrational Rotational Spectrum of HCl</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<section id="energy-levels" class="level2">
<h2 class="anchored" data-anchor-id="energy-levels">Energy levels</h2>
<p>We know from our basic chemistry lessons that atoms have energy levels. For example, the hydrogen atom’s ground state (<span class="math inline">\(n=1\)</span>) has an energy of -13.6 eV, and the next excited state (<span class="math inline">\(n=2\)</span>) has an energy of -3.4 eV. We also know that electrons can get excited to higher energy levels and spontaneously decay to a lower energy level. In this process, the electron will emit energy corresponding to the difference in energy levels. So, an electron making the transition <span class="math inline">\(n=2 \rightarrow 1\)</span> will emit a photon of energy 10.2 eV. This corresponds to a wavelength of 121.6 nm. These electronic transitions lead to what we refer to as atomic spectra.</p>
<p>Molecules, too, have electronic energy levels. However, they also have rotational and vibrational energy levels. However, the energy levels corresponding to these types of motions are lower than electronic levels. Hence, the corresponding emissions are related to the infrared and microwave parts of the electromagnetic spectrum.</p>
<p>You can obtain the wavelength corresponding to a photon using the formula <span class="math inline">\(E = \dfrac{hc}{\lambda}\)</span>. <span class="math inline">\(h\)</span> is Planck’s constant, <span class="math inline">\(6.626 \times 10^{-34}\)</span> Js and <span class="math inline">\(c\)</span> is <span class="math inline">\(2.998\times 10^8\)</span> m/s, the speed of light in vacuum.</p>
</section>
<section id="rotational-energy-levels" class="level2">
<h2 class="anchored" data-anchor-id="rotational-energy-levels">Rotational Energy levels</h2>
<p>The rotational energy levels of a diatomic molecule (like HCl or CO) is given by:</p>
<p><span id="eq-rot-energy"><span class="math display">\[
E_\text{ROT,$J$} = BJ(J+1)  
\tag{1}\]</span></span></p>
<p><span class="math inline">\(J = 0, 1, 2,3,\ldots\)</span> is the quantum number associated with the rotational motion. <span class="math inline">\(B\)</span> is called the <strong>Rotational constant</strong> and is given by:</p>
<p><span id="eq-rot-B"><span class="math display">\[
B = \dfrac{h^2}{8\pi^2 I}   
\tag{2}\]</span></span></p>
<p>Where <span class="math inline">\(I\)</span> is the moment of inertia of the molecule about its centre-of-mass given by:</p>
<p><span id="eq-I"><span class="math display">\[
I = \mu r^2_\text{bond length}  
\tag{3}\]</span></span></p>
<p>Where:</p>
<p><span id="eq-x"><span class="math display">\[
\mu = \dfrac{m_1 m_2}{m_1 + m_2}
\tag{4}\]</span></span></p>
<p>and <span class="math inline">\(m_1\)</span> and <span class="math inline">\(m_2\)</span> are the massess of the atoms and <span class="math inline">\(r_\text{bond length}\)</span> is the bond length.</p>
<p>The rules of quantum mechanics restrict the transitions between rotational energy levels in a molecule, which are specified by <strong>selection rules</strong>. The selection rule is a consequence of the conservation of angular momentum in the molecule. The selection rule for rotational transitions for a diatomic system is:</p>
<p><span id="eq-rot-selection"><span class="math display">\[
\Delta J = \pm 1
\tag{5}\]</span></span></p>
<p>This means that the change in the rotational quantum number (<span class="math inline">\(J\)</span>) between the initial and final states of the transition can only be plus or minus one.</p>
</section>
<section id="degeneracy-of-states" class="level2">
<h2 class="anchored" data-anchor-id="degeneracy-of-states">Degeneracy of states</h2>
<p>There are multiple ways for a molecule to rotate. This is reflected in quantum mechanics by a concept called <strong>degeneracy</strong>, meaning that a given energy state can exist in multiple ways. The number of ways is called the degeneracy of the system.</p>
<p>Rotational states have a degeneracy given by:</p>
<p><span class="math display">\[
\text{Rotational degeneracy} = 2J +1
\]</span>{#eq-x)</p>
</section>
<section id="intensity-of-the-spectrums" class="level2">
<h2 class="anchored" data-anchor-id="intensity-of-the-spectrums">Intensity of the spectrums</h2>
<p>A photon will be emitted whenever there is a transition between two allowed <span class="math inline">\(J\)</span> values. The more transitions there are, the greater the number of photons emitted. Therefore, the intensity or brightness of the corresponding spectral line depends on how many transitions occur. Two factors determine this number of transitions.</p>
<p>One is how many molecules are in the initial and final energy (<span class="math inline">\(J\)</span>) states. This is determined by the temperature of the system and is given by the famous Boltzmann distribution:</p>
<p><span id="eq-boltzmann"><span class="math display">\[
\dfrac{N_m}{N_n} = e^{-\left(\dfrac{E_m - E_n}{k_b T}\right)}   
\tag{6}\]</span></span></p>
<p>The second is the degeneracy of the states.</p>
</section>
<section id="vibrational-energy-levels" class="level2">
<h2 class="anchored" data-anchor-id="vibrational-energy-levels">Vibrational Energy levels</h2>
<p>The vibrational energy levels of a diatomic molecule (like HCl or CO) is given by:</p>
<p><span id="eq-rot-energy"><span class="math display">\[
E_\text{VIB,$\nu$} = \left(\nu+\dfrac{1}{2}\right) h\omega_\text{osc
\tag{7}\]</span></span></p>
<p><span class="math inline">\(\nu = 0, 1, 2,3,\ldots\)</span> is the quantum number associated with the rotational motion. <span class="math inline">\(\omega_\text{osc}\)</span> is the natural angular frequency (radians/second) of the oscillations and is given by:</p>
<p><span id="eq-vib-energy"><span class="math display">\[
\omega_\text{osc}   = \dfrac{1}{2\pi}\sqrt{\dfrac{k}{\mu}}  
\tag{8}\]</span></span></p>
<p><span class="math inline">\(k\)</span> represents the strength of the bond.</p>
<p>The selection rules for vibrational transitions are:</p>
<p><span id="eq-vib-selection"><span class="math display">\[
\Delta \nu = \pm 1, \pm 2, \pm 3, \ldots    
\tag{9}\]</span></span></p>
</section>
<section id="rotational-vibrational-energy-levels" class="level2">
<h2 class="anchored" data-anchor-id="rotational-vibrational-energy-levels">Rotational Vibrational Energy levels</h2>
<p>In reality, a molecule both rotates and vibrates. So, the energy levels of a molecule are more accurately described by:</p>
<p><span id="eq-vibrot-energy"><span class="math display">\[
E_\text{VIB-ROT,$J, \nu$} = BJ(J+1) + \left(\nu+\dfrac{1}{2}\right) h\omega_\text{osc}  
\tag{10}\]</span></span></p>
<p>The energy transitions follow both transition rules:</p>
<p><span class="math display">\[\begin{align}
\Delta J &amp;= \pm 1 \\
\Delta \nu &amp;= \pm 1, \pm 2, \pm 3, \ldots   
\end{align}\]</span></p>
</section>
<section id="data-for-hcl" class="level2">
<h2 class="anchored" data-anchor-id="data-for-hcl">Data for HCl</h2>
<table class="table">
<thead>
<tr class="header">
<th>Quantity</th>
<th style="text-align: center;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mass of <span class="math inline">\(^{1}\)</span>H</td>
<td style="text-align: center;"><span class="math inline">\(1.673 \times 10^{−27}\)</span> kg</td>
</tr>
<tr class="even">
<td>Mass of <span class="math inline">\(^{35}\)</span>Cl</td>
<td style="text-align: center;"><span class="math inline">\(58.06 \times 10^{−27}\)</span> kg</td>
</tr>
<tr class="odd">
<td>Bond length (<span class="math inline">\(r_\text{bond length}\)</span>)</td>
<td style="text-align: center;"><span class="math inline">\(0.127\)</span> nm</td>
</tr>
<tr class="even">
<td>Bond strength (<span class="math inline">\(k\)</span>)</td>
<td style="text-align: center;"><span class="math inline">\(516\)</span> Nm<span class="math inline">\(^{-1}\)</span></td>
</tr>
</tbody>
</table>
<!-- | Mass of $^{37}$Cl                    | $61.38 \times 10^{−27}$ kg | -->
</section>
</section>
<section id="tasks" class="level1">
<h1>Tasks</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Task 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Task 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Task 3</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<section id="vibrational-rotational-energy-levels" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="vibrational-rotational-energy-levels">Vibrational Rotational Energy levels</h3>
<p>Using equation #eq-vibrot-energy, reproduce the following plot for the energy levels corresponding to the rotational states <span class="math inline">\(J=0\)</span> to <span class="math inline">\(J=10\)</span> of the vibrational states <span class="math inline">\(\nu=0,1,2\)</span> for HCl molecule.</p>
<p><strong>Note:</strong> The energy is in eV.</p>
<p><img src="__imgs__/viva_vib-rot-energies.png" class="external-images img-fluid"></p>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<section id="boltzmann-population-and-rotational-degeneracy" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="boltzmann-population-and-rotational-degeneracy">Boltzmann population and Rotational Degeneracy</h3>
<p>For a given sample of HCl molecules, we can use equation #eq-boltzmann to determine how many molecules will occupy an energy state <span class="math inline">\(E_{\nu=0,J=0}\)</span> relative to the lowest energy, which is the vibrational-rotational state <span class="math inline">\(\nu=0,J=0\)</span>. Further, remember there is a degeneracy of <span class="math inline">\((2J+1)\)</span> for the rotational states. So, to find the total number of states available, we can multiply the population and degeneracy. This will give us an idea of the intensity we expect if there is a transition from that vibrational-rotational level.</p>
<p>The following plot shows this information for the <span class="math inline">\(J=0\)</span> to <span class="math inline">\(J=15\)</span> of <span class="math inline">\(\nu=0,1\)</span> of HCl for 300 K. Notice how fast the thermal population of states diminishes. Further, A peak at around <span class="math inline">\(\nu=0,J=3\)</span> indicates that we should expect more transitions from/to this level.</p>
<p><strong>Your task</strong> is to reproduce the following (or a similar) plot.</p>
<p><strong>Notes/Hints:</strong></p>
<ul>
<li>The energy now appears on the horizontal axis.</li>
<li>The vertical lines indicate the same energy levels as the previous plot.</li>
<li>Remember <code>twinx()</code></li>
</ul>
<p><img src="__imgs__/viva_vib-rot-degeneracies.png" class="external-images img-fluid" style="width:100%"></p>
</section>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<section id="vibrational-rotational-spectrum-of-hcl" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="vibrational-rotational-spectrum-of-hcl">Vibrational Rotational Spectrum of HCl</h3>
<p>If you look at the selection rules, you will notice that both of the following deexcitation transitions are possible:</p>
<p><span class="math display">\[\begin{align}
\text{P branch}\qquad&amp;(\nu, J) \rightarrow (\nu-1, J-1) \\
\text{R branch}\qquad&amp;(\nu, J) \rightarrow (\nu-1, J+1) \\
\end{align}\]</span></p>
<p>Along with degeneracy and population states, use this information to create the vibrational-rotational spectrum for HCl shown below. You need only consider <span class="math inline">\(\nu=0,1\)</span> and <span class="math inline">\(J=0\)</span> to <span class="math inline">\(J=15\)</span> (why?).</p>
<p>Do not worry about the style of the plot; just get the science right.</p>
<p><img src="__imgs__/viva_vib-rot-spectrum.png" class="external-images img-fluid" style="width:100%"></p>
<p>Just for comparison, here is the real vibrational-rotational spectrum from NIST:</p>
<p><img src="__imgs__/viva_vib-rot-nist.png" class="external-images img-fluid" style="width:100%"></p>
</section>
</div>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>