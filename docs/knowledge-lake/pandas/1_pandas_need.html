<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Seminar on Using Python in Physics - Pandas (Need)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles/specific-optimisations.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../_imgs/sp2273_logo_gray.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Seminar on Using Python in Physics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/about/overview.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/about/instructions.html"> 
<span class="menu-text">Instructions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../docs/about/instructions.html"> 
<span class="menu-text">Content</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-to-expect-in-this-chapter" id="toc-what-to-expect-in-this-chapter" class="nav-link active" data-scroll-target="#what-to-expect-in-this-chapter">What to expect in this chapter</a></li>
  <li><a href="#what-is-a-dataframe" id="toc-what-is-a-dataframe" class="nav-link" data-scroll-target="#what-is-a-dataframe"><span class="header-section-number">1</span> What is a dataframe</a>
  <ul class="collapse">
  <li><a href="#reading-data-from-csv-or-excel-files." id="toc-reading-data-from-csv-or-excel-files." class="nav-link" data-scroll-target="#reading-data-from-csv-or-excel-files."><span class="header-section-number">1.1</span> Reading data from <code>csv</code> or <code>excel</code> files.</a></li>
  <li><a href="#characteristics-to-notice" id="toc-characteristics-to-notice" class="nav-link" data-scroll-target="#characteristics-to-notice"><span class="header-section-number">1.2</span> Characteristics to notice</a></li>
  </ul></li>
  <li><a href="#quick-peeks" id="toc-quick-peeks" class="nav-link" data-scroll-target="#quick-peeks"><span class="header-section-number">2</span> Quick Peeks</a>
  <ul class="collapse">
  <li><a href="#head-and-tail" id="toc-head-and-tail" class="nav-link" data-scroll-target="#head-and-tail"><span class="header-section-number">2.1</span> Head and Tail</a></li>
  <li><a href="#size-and-shape" id="toc-size-and-shape" class="nav-link" data-scroll-target="#size-and-shape"><span class="header-section-number">2.2</span> Size and Shape</a></li>
  <li><a href="#summaries-i" id="toc-summaries-i" class="nav-link" data-scroll-target="#summaries-i"><span class="header-section-number">2.3</span> Summaries (I)</a>
  <ul class="collapse">
  <li><a href="#a-quick-digression" id="toc-a-quick-digression" class="nav-link" data-scroll-target="#a-quick-digression">A quick digression</a></li>
  <li><a href="#back-to-the-original-discussion" id="toc-back-to-the-original-discussion" class="nav-link" data-scroll-target="#back-to-the-original-discussion">Back to the original discussion</a></li>
  </ul></li>
  <li><a href="#summaries-ii" id="toc-summaries-ii" class="nav-link" data-scroll-target="#summaries-ii"><span class="header-section-number">2.4</span> Summaries (II)</a></li>
  </ul></li>
  <li><a href="#housekeeping" id="toc-housekeeping" class="nav-link" data-scroll-target="#housekeeping"><span class="header-section-number">3</span> Housekeeping</a>
  <ul class="collapse">
  <li><a href="#dropping-unnecessary-columns" id="toc-dropping-unnecessary-columns" class="nav-link" data-scroll-target="#dropping-unnecessary-columns"><span class="header-section-number">3.1</span> Dropping unnecessary columns</a></li>
  <li><a href="#reorganising-columns" id="toc-reorganising-columns" class="nav-link" data-scroll-target="#reorganising-columns"><span class="header-section-number">3.2</span> Reorganising columns</a></li>
  <li><a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns"><span class="header-section-number">3.3</span> Renaming columns</a></li>
  <li><a href="#setting-the-index" id="toc-setting-the-index" class="nav-link" data-scroll-target="#setting-the-index"><span class="header-section-number">3.4</span> Setting the index</a></li>
  <li><a href="#applying-changes" id="toc-applying-changes" class="nav-link" data-scroll-target="#applying-changes"><span class="header-section-number">3.5</span> Applying changes</a></li>
  <li><a href="#changing-column-type" id="toc-changing-column-type" class="nav-link" data-scroll-target="#changing-column-type"><span class="header-section-number">3.6</span> Changing Column Type</a></li>
  <li><a href="#adding-a-new-column" id="toc-adding-a-new-column" class="nav-link" data-scroll-target="#adding-a-new-column"><span class="header-section-number">3.7</span> Adding a new column</a></li>
  <li><a href="#saving-to-file" id="toc-saving-to-file" class="nav-link" data-scroll-target="#saving-to-file"><span class="header-section-number">3.8</span> Saving to file</a></li>
  <li><a href="#the-recipe-so-far" id="toc-the-recipe-so-far" class="nav-link" data-scroll-target="#the-recipe-so-far"><span class="header-section-number">3.9</span> The recipe so far</a></li>
  </ul></li>
  <li><a href="#asking-questions" id="toc-asking-questions" class="nav-link" data-scroll-target="#asking-questions"><span class="header-section-number">4</span> Asking questions</a>
  <ul class="collapse">
  <li><a href="#locating-data" id="toc-locating-data" class="nav-link" data-scroll-target="#locating-data"><span class="header-section-number">4.1</span> Locating data</a>
  <ul class="collapse">
  <li><a href="#using-iloc" id="toc-using-iloc" class="nav-link" data-scroll-target="#using-iloc">Using <code>iloc</code></a></li>
  <li><a href="#using-loc" id="toc-using-loc" class="nav-link" data-scroll-target="#using-loc">Using <code>loc</code></a></li>
  </ul></li>
  <li><a href="#asking-questions-with-masks" id="toc-asking-questions-with-masks" class="nav-link" data-scroll-target="#asking-questions-with-masks"><span class="header-section-number">4.2</span> Asking questions with masks</a></li>
  <li><a href="#the-magic-of-groupby" id="toc-the-magic-of-groupby" class="nav-link" data-scroll-target="#the-magic-of-groupby"><span class="header-section-number">4.3</span> The magic of <code>groupby()</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pandas (Need)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="hidden">

</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://imgs.xkcd.com/comics/digital_data_2x.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="600"></p>
</figure>
</div>
<section id="what-to-expect-in-this-chapter" class="level1 unnumbered">
<h1 class="unnumbered">What to expect in this chapter</h1>
<p>This section will introduce you to <span class="glossary">dataframes</span>. Data frames are one of the most powerful ways to store and manipulate data. They ‘look’ similar to spreadsheets, but don’t be fooled; dataframes are far more versatile and powerful. The Python package dedicated to dataframes is Pandas, which is built on top of NumPy. If you plan to work with data Pandas is one of the must-have tools in your toolkit.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Before proceeding…
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Import Pandas and NumPy using: <code>python     import pandas as pd     import numpy as np</code></p></li>
<li><p>You will also need the <code>xlrd</code> package to read and write <code>.xls</code> files. Please install it using <code>bash     conda install -c conda-forge -y xlrd</code></p></li>
<li><p>Download the following data sets and move them into your active folder.</p></li>
</ol>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th></th>
<th style="text-align: center;">Format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1.</td>
<td>Test data for a dummy class</td>
<td style="text-align: center;"><a href="link_dummy_class_1_xlsx"><code class="no-background">dummy-class_1-of-2.xlsx </code></a> <br><a href="link_dummy_class_2_xlsx"><code class="no-background">dummy-class-2-of-2.xlsx </code></a></td>
</tr>
<tr class="even">
<td style="text-align: center;">2.</td>
<td>Data for another dummy class</td>
<td style="text-align: center;"><a href="link_another_dummy_class_xlsx"><code class="no-background">another-dummy-class.xlsx </code></a></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-a-dataframe" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> What is a dataframe</h1>
<p>An easy way to get started with dataframes is to read in some data and see what it looks like. I have prepared a dummy set of classrom data for this. You should have already downloaded it into the relevant folder in your Learning Portfolio.</p>
<section id="reading-data-from-csv-or-excel-files." class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="reading-data-from-csv-or-excel-files."><span class="header-section-number">1.1</span> Reading data from <code>csv</code> or <code>excel</code> files.</h2>
<p>One of the most common file formats used to hold data that you will encounter are Excel files (<code>.xls</code> or <code>.xlsx</code>), <code>csv</code>(comma-separated-values) files or text files (<code>.txt</code> or <code>.dat</code>). Pandas offer ways to read all these files and (many) more. Let’s read in the data in <code>dummy-class.xlsx</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> pd.read_excel(<span class="st">"dummy-class-1-of-2.xlsx"</span>, skiprows <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I have used the option <code>skiprows=1</code> because the first row of the Excel file contains a description that is not data. <code>skiprows</code> is one of many options we can specify.</p>
<p>I have used the variable <code>df_class</code> to hold the dataframe. With Jupyter you can see the dataframe in a nicely formatted output by simply running:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Unnamed: 0
</th>
<th>
Name
</th>
<th>
Student No
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 2 (20%)
</th>
<th>
Test 1 (30%)
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0
</td>
<td>
Braiden Henson
</td>
<td>
A3028967J
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘18.96’
</td>
<td>
20.205
</td>
</tr>
<tr>
<th>
1
</th>
<td>
1
</td>
<td>
Gustavo Vang
</td>
<td>
A1282849W
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘17.44’
</td>
<td>
13.470
</td>
</tr>
<tr>
<th>
2
</th>
<td>
2
</td>
<td>
Ronin Christian
</td>
<td>
A5408925A
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘15.56’
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
3
</th>
<td>
3
</td>
<td>
Owen Anderson
</td>
<td>
A6973859L
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘16.36’
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
4
</th>
<td>
4
</td>
<td>
Kyla Young
</td>
<td>
A5410124H
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
NaN
</td>
<td>
15.306
</td>
</tr>
<tr>
<th>
5
</th>
<td>
5
</td>
<td>
Wyatt Oliver
</td>
<td>
A9568373Q
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘14.088’
</td>
<td>
12.246
</td>
</tr>
<tr>
<th>
6
</th>
<td>
6
</td>
<td>
Essence Bauer
</td>
<td>
A6824244G
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘16.72’
</td>
<td>
16.530
</td>
</tr>
<tr>
<th>
7
</th>
<td>
7
</td>
<td>
Maryjane Sandoval
</td>
<td>
A9194090U
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘16.4’
</td>
<td>
18.981
</td>
</tr>
<tr>
<th>
8
</th>
<td>
8
</td>
<td>
Carl Trujillo
</td>
<td>
A4828364M
</td>
<td>
LS
</td>
<td>
NB
</td>
<td>
‘13.68’
</td>
<td>
15.306
</td>
</tr>
<tr>
<th>
9
</th>
<td>
9
</td>
<td>
Halle Fritz
</td>
<td>
A4607700C
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘9.04’
</td>
<td>
17.754
</td>
</tr>
<tr>
<th>
10
</th>
<td>
10
</td>
<td>
Marie Hoffman
</td>
<td>
A7067766E
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘16.88’
</td>
<td>
19.593
</td>
</tr>
<tr>
<th>
11
</th>
<td>
11
</td>
<td>
Lilianna Kaufman
</td>
<td>
A5569996J
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘17.0’
</td>
<td>
26.328
</td>
</tr>
<tr>
<th>
12
</th>
<td>
12
</td>
<td>
Jaxon Chung
</td>
<td>
A3202548I
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘16.68’
</td>
<td>
14.082
</td>
</tr>
<tr>
<th>
13
</th>
<td>
13
</td>
<td>
Zoey Oconnell
</td>
<td>
A6131593U
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘14.128’
</td>
<td>
22.041
</td>
</tr>
<tr>
<th>
14
</th>
<td>
14
</td>
<td>
Quentin Kemp
</td>
<td>
A7653832E
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘15.72’
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
15
</th>
<td>
15
</td>
<td>
Leo Mayo
</td>
<td>
A9462811I
</td>
<td>
PHY
</td>
<td>
F
</td>
<td>
‘14.68’
</td>
<td>
20.817
</td>
</tr>
<tr>
<th>
16
</th>
<td>
16
</td>
<td>
Camden Williams
</td>
<td>
A1218599T
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘17.648’
</td>
<td>
22.653
</td>
</tr>
<tr>
<th>
17
</th>
<td>
17
</td>
<td>
Sidney Wiggins
</td>
<td>
A7210476B
</td>
<td>
PHY
</td>
<td>
NB
</td>
<td>
‘14.68’
</td>
<td>
19.593
</td>
</tr>
<tr>
<th>
18
</th>
<td>
18
</td>
<td>
Solomon Fletcher
</td>
<td>
A1512479K
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘15.0’
</td>
<td>
18.981
</td>
</tr>
<tr>
<th>
19
</th>
<td>
19
</td>
<td>
Riley Christensen
</td>
<td>
A7986368Y
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘16.016’
</td>
<td>
15.306
</td>
</tr>
<tr>
<th>
20
</th>
<td>
20
</td>
<td>
Malik Becker
</td>
<td>
A2727061A
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
NaN
</td>
<td>
12.858
</td>
</tr>
<tr>
<th>
21
</th>
<td>
21
</td>
<td>
Skylar Hensley
</td>
<td>
A2999472W
</td>
<td>
CHM
</td>
<td>
M
</td>
<td>
‘17.648’
</td>
<td>
23.877
</td>
</tr>
<tr>
<th>
22
</th>
<td>
22
</td>
<td>
Braydon Duran
</td>
<td>
A7116486E
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘14.36’
</td>
<td>
15.918
</td>
</tr>
<tr>
<th>
23
</th>
<td>
23
</td>
<td>
Jalen Harmon
</td>
<td>
A6931452S
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘16.88’
</td>
<td>
22.041
</td>
</tr>
<tr>
<th>
24
</th>
<td>
24
</td>
<td>
Ean Haas
</td>
<td>
A9649096H
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
‘14.36’
</td>
<td>
19.593
</td>
</tr>
<tr>
<th>
25
</th>
<td>
25
</td>
<td>
Carolina Mcmahon
</td>
<td>
A1643380L
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘18.08’
</td>
<td>
12.858
</td>
</tr>
<tr>
<th>
26
</th>
<td>
26
</td>
<td>
Elian Potter
</td>
<td>
A6787293E
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘14.36’
</td>
<td>
23.265
</td>
</tr>
<tr>
<th>
27
</th>
<td>
27
</td>
<td>
Litzy White
</td>
<td>
A5975988J
</td>
<td>
PHY
</td>
<td>
NB
</td>
<td>
‘15.92’
</td>
<td>
20.817
</td>
</tr>
<tr>
<th>
28
</th>
<td>
28
</td>
<td>
Norah Miles
</td>
<td>
A3699958T
</td>
<td>
CHM
</td>
<td>
M
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
29
</th>
<td>
29
</td>
<td>
Mariela Sheppard
</td>
<td>
A1956366U
</td>
<td>
LS
</td>
<td>
NB
</td>
<td>
‘11.0’
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
30
</th>
<td>
30
</td>
<td>
Isabela Stokes
</td>
<td>
A1468689D
</td>
<td>
CHM
</td>
<td>
M
</td>
<td>
‘16.8’
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
31
</th>
<td>
31
</td>
<td>
Kathleen Rodriguez
</td>
<td>
A3217320C
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘17.76’
</td>
<td>
22.653
</td>
</tr>
<tr>
<th>
32
</th>
<td>
32
</td>
<td>
Katie Ayers
</td>
<td>
A6867791C
</td>
<td>
CBIO
</td>
<td>
F
</td>
<td>
‘10.28’
</td>
<td>
16.530
</td>
</tr>
<tr>
<th>
33
</th>
<td>
33
</td>
<td>
Tucker Sloan
</td>
<td>
A4080490P
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘15.04’
</td>
<td>
17.754
</td>
</tr>
<tr>
<th>
34
</th>
<td>
34
</td>
<td>
Carter Crane
</td>
<td>
A7667457P
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘13.816’
</td>
<td>
20.817
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="characteristics-to-notice" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="characteristics-to-notice"><span class="header-section-number">1.2</span> Characteristics to notice</h2>
<p>Okay, now you are bound to think that the above dataframe is no different from a typical spreadsheet. First, however, let me draw your attention to three different characteristics.</p>
<ol type="1">
<li>The first is the use of an <code>index</code> (leftmost column in bold) for each row (<code>0 1 2 3...</code>). This simple fact simplifies doing things with your data. I will show you some examples later.</li>
<li>The second is that a column (called a Pandas Series) can only have a single type of data. So, for example, you can have numbers or text; but not both.</li>
<li>The third is the presence of <code>NaN</code> (‘Not-a-Number’) when data is missing. Missing data is a common bane of real data; Pandas offers powerful ways to deal with such missing numbers transparently. I will show more later in this chapter.</li>
</ol>
<p>For the moment,</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that a dataframe is like a spreadsheet but has an additional unique index for each row. This index plays an important role.</p>
</div>
</div>
</section>
</section>
<section id="quick-peeks" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Quick Peeks</h1>
<section id="head-and-tail" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="head-and-tail"><span class="header-section-number">2.1</span> Head and Tail</h2>
<p>Real data sets are bound to have more rows than the dummy class toy data set. You can take a quick peek at the top or bottom of the dataframe by using the <code>head()</code> and <code>tail()</code> methods, respectively.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_class.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Unnamed: 0
</th>
<th>
Name
</th>
<th>
Student No
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 2 (20%)
</th>
<th>
Test 1 (30%)
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0
</td>
<td>
Braiden Henson
</td>
<td>
A3028967J
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘18.96’
</td>
<td>
20.205
</td>
</tr>
<tr>
<th>
1
</th>
<td>
1
</td>
<td>
Gustavo Vang
</td>
<td>
A1282849W
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
‘17.44’
</td>
<td>
13.470
</td>
</tr>
<tr>
<th>
2
</th>
<td>
2
</td>
<td>
Ronin Christian
</td>
<td>
A5408925A
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
‘15.56’
</td>
<td>
18.366
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_class.tail(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Unnamed: 0
</th>
<th>
Name
</th>
<th>
Student No
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 2 (20%)
</th>
<th>
Test 1 (30%)
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
32
</th>
<td>
32
</td>
<td>
Katie Ayers
</td>
<td>
A6867791C
</td>
<td>
CBIO
</td>
<td>
F
</td>
<td>
‘10.28’
</td>
<td>
16.530
</td>
</tr>
<tr>
<th>
33
</th>
<td>
33
</td>
<td>
Tucker Sloan
</td>
<td>
A4080490P
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘15.04’
</td>
<td>
17.754
</td>
</tr>
<tr>
<th>
34
</th>
<td>
34
</td>
<td>
Carter Crane
</td>
<td>
A7667457P
</td>
<td>
LS
</td>
<td>
M
</td>
<td>
‘13.816’
</td>
<td>
20.817
</td>
</tr>
</tbody>
</table>
<p>If you do not specify the number of rows, it defaults to five.</p>
</section>
<section id="size-and-shape" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="size-and-shape"><span class="header-section-number">2.2</span> Size and Shape</h2>
<p>We can get the size and shape of the dataframe by using <code>shape</code>, <code>len()</code> and <code>columns</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_class.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(35, 7)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(df_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>35</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_class.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Index(['Unnamed: 0', 'Name', 'Student No', 'Major', 'Gender', 'Test 2 (20%)',
       'Test 1 (30%)'],
      dtype='object')</code></pre>
</div>
</div>
</section>
<section id="summaries-i" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="summaries-i"><span class="header-section-number">2.3</span> Summaries (I)</h2>
<p>Pandas offer more powerful ways to get more valuable summaries of your dataset with the methods <code>info()</code> and <code>describe()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_class.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 35 entries, 0 to 34
Data columns (total 7 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   Unnamed: 0    35 non-null     int64  
 1   Name          35 non-null     object 
 2   Student No    35 non-null     object 
 3   Major         35 non-null     object 
 4   Gender        35 non-null     object 
 5   Test 2 (20%)  32 non-null     object 
 6   Test 1 (30%)  33 non-null     float64
dtypes: float64(1), int64(1), object(5)
memory usage: 2.0+ KB</code></pre>
</div>
</div>
<p>This information is very useful. You can quickly see the various columns, what type of data they contain and how many data points are present. This is a good place to spot missing data like in ‘Test 1’ and ‘Test 2’. The type <code>object</code> means <code>str</code> or English-like data. <code>float64</code> is floating point data (i.e.&nbsp;decimal numbers). We also note that ‘Test 2’ is not a numerical type despite their data having numerical significance. So, one of the first things we should do is convert these to numerical types. I will focus on type conversion a bit later. However, let me ‘parachute’ some code here to continue our discussion.</p>
<section id="a-quick-digression" class="level3">
<h3 class="anchored" data-anchor-id="a-quick-digression">A quick digression</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">The problem</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">After the conversion</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Pandas do not see ‘Test 2’ data as numbers because its data has additional<code>' '</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 2 (20%)'</span>].head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0    '18.96'
1    '17.44'
2    '15.56'
Name: Test 2 (20%), dtype: object</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Here, I first replace the <code>'</code> with nothing and then convert the data using <code>pd.to_numeric()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 2 (20%)'</span>] <span class="op">=</span> df_class[<span class="st">'Test 2 (20%)'</span>].<span class="bu">str</span>.replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 2 (20%)'</span>] <span class="op">=</span> pd.to_numeric(df_class[<span class="st">'Test 2 (20%)'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_class.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 35 entries, 0 to 34
Data columns (total 7 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   Unnamed: 0    35 non-null     int64  
 1   Name          35 non-null     object 
 2   Student No    35 non-null     object 
 3   Major         35 non-null     object 
 4   Gender        35 non-null     object 
 5   Test 2 (20%)  32 non-null     float64
 6   Test 1 (30%)  33 non-null     float64
dtypes: float64(2), int64(1), object(4)
memory usage: 2.0+ KB</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="back-to-the-original-discussion" class="level3">
<h3 class="anchored" data-anchor-id="back-to-the-original-discussion">Back to the original discussion</h3>
<p>Okay, let’s continue discussing ways to peek into the file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_class.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Unnamed: 0  Test 2 (20%)  Test 1 (30%)
count   35.000000     32.000000     33.000000
mean    17.000000     15.405750     18.534455
std     10.246951      2.229394      3.487934
min      0.000000      9.040000     12.246000
25%      8.500000     14.360000     15.918000
50%     17.000000     15.820000     18.366000
75%     25.500000     16.880000     20.817000
max     34.000000     18.960000     26.328000</code></pre>
</div>
</div>
<p><code>describe()</code> gives us some summary statistics. By default, it only shows information relevant to the numerical columns. But let’s ask for more!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_class.describe(include<span class="op">=</span><span class="st">"all"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Unnamed: 0            Name  ... Test 2 (20%) Test 1 (30%)
count    35.000000              35  ...    32.000000    33.000000
unique         NaN              35  ...          NaN          NaN
top            NaN  Braiden Henson  ...          NaN          NaN
freq           NaN               1  ...          NaN          NaN
mean     17.000000             NaN  ...    15.405750    18.534455
std      10.246951             NaN  ...     2.229394     3.487934
min       0.000000             NaN  ...     9.040000    12.246000
25%       8.500000             NaN  ...    14.360000    15.918000
50%      17.000000             NaN  ...    15.820000    18.366000
75%      25.500000             NaN  ...    16.880000    20.817000
max      34.000000             NaN  ...    18.960000    26.328000

[11 rows x 7 columns]</code></pre>
</div>
</div>
<p><code>unique</code> tells us how many unique entries are present. It also shows information about the <code>top</code> one with the highest <code>freq</code>uency. For example, there are four ‘Majors’ and <code>LS</code> appears 14 times. Gender has three unique values, with <code>M</code> appearing 16 times.</p>
</section>
</section>
<section id="summaries-ii" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="summaries-ii"><span class="header-section-number">2.4</span> Summaries (II)</h2>
<p>I can also do the following to get quick summaries.</p>
<div class="my-examples">
<ol>
<li>
<p>Data for a single column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 1 (30%)'</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>18.534454545454548</code></pre>
</div>
</div>
</li>
<li>
<p>Data for multiple columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_class[[<span class="st">'Test 1 (30%)'</span>, <span class="st">'Test 2 (20%)'</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test 1 (30%)    18.534455
Test 2 (20%)    15.405750
dtype: float64</code></pre>
</div>
</div>
</li>
<li>
<p>Show me all the values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array(['PHY', 'CHM', 'PHY', 'LS', 'PHY', 'PHY', 'LS', 'LS', 'LS', 'LS',
       'LS', 'LS', 'PHY', 'LS', 'CHM', 'PHY', 'CHM', 'PHY', 'CHM', 'CHM',
       'PHY', 'CHM', 'LS', 'LS', 'LS', 'PHY', 'PHY', 'PHY', 'CHM', 'LS',
       'CHM', 'PHY', 'CBIO', 'LS', 'LS'], dtype=object)</code></pre>
</div>
</div>
</li>
<li>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array(['PHY', 'CHM', 'LS', 'CBIO'], dtype=object)</code></pre>
</div>
</div>
</li>
<li>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Major
LS      14
PHY     12
CHM      8
CBIO     1
Name: count, dtype: int64</code></pre>
</div>
</div>
<p>We can typecast these outputs to more familiar lists or dictionaries by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].value_counts().to_dict()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'LS': 14, 'PHY': 12, 'CHM': 8, 'CBIO': 1}</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].value_counts().to_list()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[14, 12, 8, 1]</code></pre>
</div>
</div>
<p>The following is useful too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].value_counts().index.to_list()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['LS', 'PHY', 'CHM', 'CBIO']</code></pre>
</div>
</div>
</li>
</ol>
</div>
</section>
</section>
<section id="housekeeping" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Housekeeping</h1>
<p>It is always a good idea to housekeep (wrangle) your data so that you fix issues right at the start.</p>
<section id="dropping-unnecessary-columns" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="dropping-unnecessary-columns"><span class="header-section-number">3.1</span> Dropping unnecessary columns</h2>
<p>Let me start by dropping the unnecessary column <code>Unnamed: 0</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df_class.drop(columns<span class="op">=</span>[<span class="st">'Unnamed: 0'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Unnamed: 0
</th>
<th>
Name
</th>
<th>
Student No
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 2 (20%)
</th>
<th>
Test 1 (30%)
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0
</td>
<td>
Braiden Henson
</td>
<td>
A3028967J
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
18.96
</td>
<td>
20.205
</td>
</tr>
<tr>
<th>
1
</th>
<td>
1
</td>
<td>
Gustavo Vang
</td>
<td>
A1282849W
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
17.44
</td>
<td>
13.470
</td>
</tr>
<tr>
<th>
2
</th>
<td>
2
</td>
<td>
Ronin Christian
</td>
<td>
A5408925A
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
15.56
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
3
</th>
<td>
3
</td>
<td>
Owen Anderson
</td>
<td>
A6973859L
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
16.36
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
4
</th>
<td>
4
</td>
<td>
Kyla Young
</td>
<td>
A5410124H
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
NaN
</td>
<td>
15.306
</td>
</tr>
</tbody>
</table>
<p>Okay, it seems to have worked <strong>but</strong>, if you look at <code>df_class</code>, you will see nothing has changed!</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_class.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Unnamed: 0
</th>
<th>
Name
</th>
<th>
Student No
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 2 (20%)
</th>
<th>
Test 1 (30%)
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
0
</td>
<td>
Braiden Henson
</td>
<td>
A3028967J
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
18.96
</td>
<td>
20.205
</td>
</tr>
<tr>
<th>
1
</th>
<td>
1
</td>
<td>
Gustavo Vang
</td>
<td>
A1282849W
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
17.44
</td>
<td>
13.470
</td>
</tr>
<tr>
<th>
2
</th>
<td>
2
</td>
<td>
Ronin Christian
</td>
<td>
A5408925A
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
15.56
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
3
</th>
<td>
3
</td>
<td>
Owen Anderson
</td>
<td>
A6973859L
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
16.36
</td>
<td>
18.366
</td>
</tr>
<tr>
<th>
4
</th>
<td>
4
</td>
<td>
Kyla Young
</td>
<td>
A5410124H
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
NaN
</td>
<td>
15.306
</td>
</tr>
</tbody>
</table>
<p>What is happening is that the <code>drop()</code> command drops, but <strong>gives us a new dataframe without changing the original</strong>. There are two ways to change our original dataframe.</p>
<p>One is simply to update the variable.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> df_class.drop(columns<span class="op">=</span>[<span class="st">'Unnamed: 0'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Another is to set the option <code>inplace=True</code> so that <code>drop()</code> makes the modifications to the original dataframe, <strong>inplace</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df_class.drop(columns<span class="op">=</span>[<span class="st">'Unnamed: 0'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you do this, there will be no output displayed. Note also that not all methods offer the option <code>inplace.</code></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember to update the original dataframe if you make changes by either updating the variable or using <code>inplace</code></p>
</div>
</div>
<p>I find this behaviour of not modifying the original dataframe until we explicitly say so very useful. I can mess with the dataframe as I like and only update when I know I am ready.</p>
</section>
<section id="reorganising-columns" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="reorganising-columns"><span class="header-section-number">3.2</span> Reorganising columns</h2>
<p>I like to reorganise my columns so that the student number is the first column. I can do it like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>columns_to_keep <span class="op">=</span> [<span class="st">'Student No'</span>, <span class="st">'Name'</span>, <span class="st">'Major'</span>, <span class="st">'Gender'</span>,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 1 (30%)'</span>, <span class="st">'Test 2 (20%)'</span>]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> df_class[columns_to_keep]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Incidentally, I could have done the reorganisation and dropping with this single step. However, this can get tedious if you have a lot of columns.</p>
</section>
<section id="renaming-columns" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="renaming-columns"><span class="header-section-number">3.3</span> Renaming columns</h2>
<p>Let’s now rename some of the columns. This is very easy; we just have to supply a dictionary with the columns we want to update. The changes I want are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>new_column_info <span class="op">=</span> {<span class="st">'Student No'</span>: <span class="st">'MATRIC_NO'</span>,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 1 (30%)'</span>: <span class="st">'Test 1'</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 2 (20%)'</span>: <span class="st">'Test 2'</span>}</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>df_class.rename(columns<span class="op">=</span>new_column_info, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df_class.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
A3028967J
</td>
<td>
Braiden Henson
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
20.205
</td>
<td>
18.96
</td>
</tr>
<tr>
<th>
1
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
13.470
</td>
<td>
17.44
</td>
</tr>
<tr>
<th>
2
</th>
<td>
A5408925A
</td>
<td>
Ronin Christian
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
18.366
</td>
<td>
15.56
</td>
</tr>
<tr>
<th>
3
</th>
<td>
A6973859L
</td>
<td>
Owen Anderson
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
18.366
</td>
<td>
16.36
</td>
</tr>
<tr>
<th>
4
</th>
<td>
A5410124H
</td>
<td>
Kyla Young
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
15.306
</td>
<td>
NaN
</td>
</tr>
</tbody>
</table>
</section>
<section id="setting-the-index" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="setting-the-index"><span class="header-section-number">3.4</span> Setting the index</h2>
<p>At the moment, the indices are just numbers from 0 to 34. You can check this with</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df_class.index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>RangeIndex(start=0, stop=35, step=1)</code></pre>
</div>
</div>
<p>However, I want to change it so I can refer to my rows using the <code>MATRIC_NO</code> (I will show you why this is useful later).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>df_class.set_index(<span class="st">'MATRIC_NO'</span>, drop<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I am asking Pandas to use the values of the column ‘MATRIC_NO’ as indices for the rows. I put <code>drop=False</code> to prevent Pandas from dropping the column because I still like to keep it.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>df_class.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A3028967J
</th>
<td>
A3028967J
</td>
<td>
Braiden Henson
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
20.205
</td>
<td>
18.96
</td>
</tr>
<tr>
<th>
A1282849W
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
CHM
</td>
<td>
F
</td>
<td>
13.470
</td>
<td>
17.44
</td>
</tr>
<tr>
<th>
A5408925A
</th>
<td>
A5408925A
</td>
<td>
Ronin Christian
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
18.366
</td>
<td>
15.56
</td>
</tr>
<tr>
<th>
A6973859L
</th>
<td>
A6973859L
</td>
<td>
Owen Anderson
</td>
<td>
LS
</td>
<td>
F
</td>
<td>
18.366
</td>
<td>
16.36
</td>
</tr>
<tr>
<th>
A5410124H
</th>
<td>
A5410124H
</td>
<td>
Kyla Young
</td>
<td>
PHY
</td>
<td>
M
</td>
<td>
15.306
</td>
<td>
NaN
</td>
</tr>
</tbody>
</table>
</section>
<section id="applying-changes" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="applying-changes"><span class="header-section-number">3.5</span> Applying changes</h2>
<p>There are a few things I like to change with the data.</p>
<ol type="1">
<li>Replacing the abbreviation for the majors with full names,</li>
<li>Replacing the abbreviation for the ‘M’, ‘F’, ‘NB’ with their full forms.<br>
</li>
<li>The <code>Test 2</code> column has all its numbers between inverted commas (e.g.&nbsp;‘16.36’ ). I like to remove these inverted commas.</li>
</ol>
<p>The first two are very simple. But before we do anything, let’s get a list of all the unique items in the columns <code>Majors</code> and <code>Gender</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Major'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array(['PHY', 'CHM', 'LS', 'CBIO'], dtype=object)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Gender'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array(['M', 'F', 'NB'], dtype=object)</code></pre>
</div>
</div>
<p>Now that we know the unique values, let’s make the changes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>replace_info <span class="op">=</span> {</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'PHY'</span>: <span class="st">'Physics'</span>,</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'CHM'</span>: <span class="st">'Chemistry'</span>,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'LS'</span>: <span class="st">'Life Sciences'</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'CBIO'</span>: <span class="st">'Comp. Biology'</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'F'</span>: <span class="st">'Female'</span>,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'M'</span>: <span class="st">'Male'</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NB'</span>: <span class="st">'Non-binary'</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>df_class.replace(to_replace<span class="op">=</span>replace_info, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are a few ways to do the third. Let me show you the method that is the most versatile and uses the <code>apply()</code> method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean(text):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text.replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">AttributeError</span>:</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This will handle the NaN of the missing data</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 2'</span>] <span class="op">=</span> df_class[<span class="st">'Test 2'</span>].<span class="bu">apply</span>(clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we use the <code>apply()</code> method to apply my function <code>clean</code> to the column ‘Test 2’. The missing numbers in this column are a bit annoying because they are replaced with <code>NaN</code>, which is a float, while everything else is a string (i.e.&nbsp;English). So, I have included a <code>try-except</code> statement to get around this. Again, I know the exact error because Python screamed it at me when I did not account for the error. The <code>apply()</code> method is super useful and can be used to do more complicated things. This is good enough for now.</p>
<p>Let’s see what our handiwork looks like:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df_class.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A3028967J
</th>
<td>
A3028967J
</td>
<td>
Braiden Henson
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
20.205
</td>
<td>
18.96
</td>
</tr>
<tr>
<th>
A1282849W
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
13.470
</td>
<td>
17.44
</td>
</tr>
<tr>
<th>
A5408925A
</th>
<td>
A5408925A
</td>
<td>
Ronin Christian
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
18.366
</td>
<td>
15.56
</td>
</tr>
<tr>
<th>
A6973859L
</th>
<td>
A6973859L
</td>
<td>
Owen Anderson
</td>
<td>
Life Sciences
</td>
<td>
Female
</td>
<td>
18.366
</td>
<td>
16.36
</td>
</tr>
<tr>
<th>
A5410124H
</th>
<td>
A5410124H
</td>
<td>
Kyla Young
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
15.306
</td>
<td>
NaN
</td>
</tr>
</tbody>
</table>
</section>
<section id="changing-column-type" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="changing-column-type"><span class="header-section-number">3.6</span> Changing Column Type</h2>
<p>Let’s now change the column type for some of our columns so that they are more representative of the data they carry. First, remember that we have a problem with column ‘Test 2’ in that it is in English and not in number format viz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>df_class.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 35 entries, A3028967J to A7667457P
Data columns (total 6 columns):
 #   Column     Non-Null Count  Dtype  
---  ------     --------------  -----  
 0   MATRIC_NO  35 non-null     object 
 1   Name       35 non-null     object 
 2   Major      35 non-null     object 
 3   Gender     35 non-null     object 
 4   Test 1     33 non-null     float64
 5   Test 2     32 non-null     float64
dtypes: float64(2), object(4)
memory usage: 1.9+ KB</code></pre>
</div>
</div>
<p>Changing type is done with a dictionary and is just as easy. I will also change the type of <code>Major</code> and <code>Gender</code> as they hold categorical data (i.e.&nbsp;data that are limited to a fixed number of options).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>new_type_info <span class="op">=</span> {<span class="st">'Major'</span>: <span class="st">'category'</span>,</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Gender'</span>: <span class="st">'category'</span>,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Test 2'</span>: <span class="st">'float'</span>}</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># atype does NOT have an inplace option</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> df_class.astype(new_type_info)      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check if this worked.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df_class.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 35 entries, A3028967J to A7667457P
Data columns (total 6 columns):
 #   Column     Non-Null Count  Dtype   
---  ------     --------------  -----   
 0   MATRIC_NO  35 non-null     object  
 1   Name       35 non-null     object  
 2   Major      35 non-null     category
 3   Gender     35 non-null     category
 4   Test 1     33 non-null     float64 
 5   Test 2     32 non-null     float64 
dtypes: category(2), float64(2), object(2)
memory usage: 1.8+ KB</code></pre>
</div>
</div>
<p>Yup, looks good.</p>
</section>
<section id="adding-a-new-column" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="adding-a-new-column"><span class="header-section-number">3.7</span> Adding a new column</h2>
<p>We should create a new column called <code>Total</code> to hold the total score. This is laughably simple.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">"Total"</span>] <span class="op">=</span> df_class[<span class="st">"Test 1"</span>] <span class="op">+</span> df_class[<span class="st">"Test 2"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A3028967J
</th>
<td>
A3028967J
</td>
<td>
Braiden Henson
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
20.205
</td>
<td>
18.96
</td>
<td>
39.165
</td>
</tr>
<tr>
<th>
A1282849W
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
13.470
</td>
<td>
17.44
</td>
<td>
30.910
</td>
</tr>
<tr>
<th>
A5408925A
</th>
<td>
A5408925A
</td>
<td>
Ronin Christian
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
18.366
</td>
<td>
15.56
</td>
<td>
33.926
</td>
</tr>
<tr>
<th>
A6973859L
</th>
<td>
A6973859L
</td>
<td>
Owen Anderson
</td>
<td>
Life Sciences
</td>
<td>
Female
</td>
<td>
18.366
</td>
<td>
16.36
</td>
<td>
34.726
</td>
</tr>
<tr>
<th>
A5410124H
</th>
<td>
A5410124H
</td>
<td>
Kyla Young
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
15.306
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
</tbody>
</table>
</section>
<section id="saving-to-file" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="saving-to-file"><span class="header-section-number">3.8</span> Saving to file</h2>
<p>Let’s export our dataframe as an Excel file (many other options are possible!).</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>df_class.to_excel(<span class="st">'finalised_scores.xlsx'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I have used the <code>index=False</code> to tell Pandas not to write the index column.</p>
</section>
<section id="the-recipe-so-far" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="the-recipe-so-far"><span class="header-section-number">3.9</span> The recipe so far</h2>
<p>Ideally, what should follow now is fixing any missing data. However, I will postpone that discussion to the next chapter and move on to another important thing to do with dataframes. Before that, however, let me show you the full recipe we have so far been building.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> pd.read_excel(<span class="st">'dummy-class-1-of-2.xlsx'</span>, skiprows<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------ Drop and reorganise columns  -----------------#</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>columns_to_keep <span class="op">=</span> [<span class="st">'Student No'</span>, <span class="st">'Name'</span>, <span class="st">'Major'</span>, <span class="st">'Gender'</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 1 (30%)'</span>, <span class="st">'Test 2 (20%)'</span>]</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> df_class[columns_to_keep]</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------- Rename columns ------------------------#</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>new_column_info <span class="op">=</span> {<span class="st">'Student No'</span>: <span class="st">'MATRIC_NO'</span>,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 1 (30%)'</span>: <span class="st">'Test 1'</span>,</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Test 2 (20%)'</span>: <span class="st">'Test 2'</span>}</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>df_class.rename(columns<span class="op">=</span>new_column_info, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------- Set index to MATRIC_NO --------------------#</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>df_class.set_index(<span class="st">'MATRIC_NO'</span>, drop<span class="op">=</span><span class="va">False</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="co">#-------------------------- Rename stuff -------------------------#</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>replace_info <span class="op">=</span> {</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'PHY'</span>: <span class="st">'Physics'</span>,</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">'CHM'</span>: <span class="st">'Chemistry'</span>,</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'LS'</span>: <span class="st">'Life Sciences'</span>,</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'CBIO'</span>: <span class="st">'Comp. Biology'</span>,</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'F'</span>: <span class="st">'Female'</span>,</span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'M'</span>: <span class="st">'Male'</span>,</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'NB'</span>: <span class="st">'Non-binary'</span></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>df_class.replace(to_replace<span class="op">=</span>replace_info, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a><span class="co">#---------------- Remove the ' ' from column Test 2 --------------#</span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean(text):</span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a><span class="co">    Function to remove ' ' from column 'Test 2'.</span></span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="co">    To be applied using apply()</span></span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text.replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb63-42"><a href="#cb63-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">AttributeError</span>:</span>
<span id="cb63-43"><a href="#cb63-43" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This will handle the NaN of the missing data</span></span>
<span id="cb63-44"><a href="#cb63-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> text</span>
<span id="cb63-45"><a href="#cb63-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-46"><a href="#cb63-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-47"><a href="#cb63-47" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">'Test 2'</span>] <span class="op">=</span> df_class[<span class="st">'Test 2'</span>].<span class="bu">apply</span>(clean)</span>
<span id="cb63-48"><a href="#cb63-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-49"><a href="#cb63-49" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------- Convert column Test 2 to type float -------------#</span></span>
<span id="cb63-50"><a href="#cb63-50" aria-hidden="true" tabindex="-1"></a>new_type_info <span class="op">=</span> {<span class="st">'Major'</span>: <span class="st">'category'</span>,</span>
<span id="cb63-51"><a href="#cb63-51" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Gender'</span>: <span class="st">'category'</span>,</span>
<span id="cb63-52"><a href="#cb63-52" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'Test 2'</span>: <span class="st">'float'</span>}</span>
<span id="cb63-53"><a href="#cb63-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-54"><a href="#cb63-54" aria-hidden="true" tabindex="-1"></a>df_class <span class="op">=</span> df_class.astype(new_type_info)</span>
<span id="cb63-55"><a href="#cb63-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-56"><a href="#cb63-56" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------ Add a new column -----------------------#</span></span>
<span id="cb63-57"><a href="#cb63-57" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">"Total"</span>] <span class="op">=</span> df_class[<span class="st">"Test 1"</span>] <span class="op">+</span> df_class[<span class="st">"Test 2"</span>]</span>
<span id="cb63-58"><a href="#cb63-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-59"><a href="#cb63-59" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------- Export the file -----------------------#</span></span>
<span id="cb63-60"><a href="#cb63-60" aria-hidden="true" tabindex="-1"></a>df_class.to_excel(<span class="st">'finalised_scores.xlsx'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb63-61"><a href="#cb63-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-62"><a href="#cb63-62" aria-hidden="true" tabindex="-1"></a>df_class.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="asking-questions" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Asking questions</h1>
<p>Now we are ready to start probing our dataset for interesting tidbits. But first, we need to know ourselves around the dataframe.</p>
<section id="locating-data" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="locating-data"><span class="header-section-number">4.1</span> Locating data</h2>
<p>Pandas offer us two ways (<code>loc</code> and <code>iloc</code>) to access and <code>loc</code>ate the data in our dataframe.</p>
<section id="using-iloc" class="level3">
<h3 class="anchored" data-anchor-id="using-iloc">Using <code>iloc</code></h3>
<p>We use <code>iloc</code> by specifying <strong>an index</strong> (like with a NumPy array). So, the following will show the contents from rows 11, 12, and 13 of columns 3 and 4 (Remember that Python is zero-indexed!).</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>df_class.iloc[<span class="dv">10</span>:<span class="dv">13</span>, <span class="dv">2</span>:<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Major
</th>
<th>
Gender
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A7067766E
</th>
<td>
Life Sciences
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A5569996J
</th>
<td>
Life Sciences
</td>
<td>
Male
</td>
</tr>
<tr>
<th>
A3202548I
</th>
<td>
Physics
</td>
<td>
Male
</td>
</tr>
</tbody>
</table>
</section>
<section id="using-loc" class="level3">
<h3 class="anchored" data-anchor-id="using-loc">Using <code>loc</code></h3>
<p>We use <code>loc</code> by specifying a <strong>names</strong> of rows (i.e.&nbsp;the indexes) or a <strong>mask</strong>. I will explain the mask part in a bit; for the moment, here is how to get the same output as above. Please note that the ‘numbers’ corresponding to rows from 11 to 14, in this case, are ‘names’.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>df_class.loc[[<span class="st">"A7067766E"</span>, <span class="st">"A5569996J"</span>, <span class="st">"A3202548I"</span>], [<span class="st">"Major"</span>, <span class="st">"Gender"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Major
</th>
<th>
Gender
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A7067766E
</th>
<td>
Life Sciences
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A5569996J
</th>
<td>
Life Sciences
</td>
<td>
Male
</td>
</tr>
<tr>
<th>
A3202548I
</th>
<td>
Physics
</td>
<td>
Male
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="asking-questions-with-masks" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="asking-questions-with-masks"><span class="header-section-number">4.2</span> Asking questions with masks</h2>
<p><code>loc</code> is most powerful with a mask (like NumPy) array. You can create a mask of (<code>True</code> and <code>False</code>) by asking a simple question. Here are some examples. <br></p>
<div class="my-examples">
<ol>
<li>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df_class[<span class="st">"Major"</span>] <span class="op">==</span> <span class="st">"Chemistry"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>MATRIC_NO
A3028967J    False
A1282849W     True
A5408925A    False
A6973859L    False
A5410124H    False
A9568373Q    False
A6824244G    False
A9194090U    False
A4828364M    False
A4607700C    False
A7067766E    False
A5569996J    False
A3202548I    False
A6131593U    False
A7653832E     True
A9462811I    False
A1218599T     True
A7210476B    False
A1512479K     True
A7986368Y     True
A2727061A    False
A2999472W     True
A7116486E    False
A6931452S    False
A9649096H    False
A1643380L    False
A6787293E    False
A5975988J    False
A3699958T     True
A1956366U    False
A1468689D     True
A3217320C    False
A6867791C    False
A4080490P    False
A7667457P    False
Name: Major, dtype: bool</code></pre>
</div>
</div>
<p>as you can see, the ‘answer’ is a bunch of <code>True</code> and <code>False</code> values for the <strong>whole dataframe</strong>. You can then apply these <code>True</code> and <code>False</code> values to mask the values that are <code>False</code> like this:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df_class.loc[df_class[<span class="st">"Major"</span>] <span class="op">==</span> <span class="st">"Chemistry"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A1282849W
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
13.470
</td>
<td>
17.440
</td>
<td>
30.910
</td>
</tr>
<tr>
<th>
A7653832E
</th>
<td>
A7653832E
</td>
<td>
Quentin Kemp
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
NaN
</td>
<td>
15.720
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A1218599T
</th>
<td>
A1218599T
</td>
<td>
Camden Williams
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
22.653
</td>
<td>
17.648
</td>
<td>
40.301
</td>
</tr>
<tr>
<th>
A1512479K
</th>
<td>
A1512479K
</td>
<td>
Solomon Fletcher
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
18.981
</td>
<td>
15.000
</td>
<td>
33.981
</td>
</tr>
<tr>
<th>
A7986368Y
</th>
<td>
A7986368Y
</td>
<td>
Riley Christensen
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
15.306
</td>
<td>
16.016
</td>
<td>
31.322
</td>
</tr>
<tr>
<th>
A2999472W
</th>
<td>
A2999472W
</td>
<td>
Skylar Hensley
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
23.877
</td>
<td>
17.648
</td>
<td>
41.525
</td>
</tr>
<tr>
<th>
A3699958T
</th>
<td>
A3699958T
</td>
<td>
Norah Miles
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A1468689D
</th>
<td>
A1468689D
</td>
<td>
Isabela Stokes
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
18.366
</td>
<td>
16.800
</td>
<td>
35.166
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You can invert a mask with the <code>~</code> like this.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df_class.loc[<span class="op">~</span>(df_class[<span class="st">"Major"</span>] <span class="op">==</span> <span class="st">"Life Sciences"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
MATRIC_NO
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A3028967J
</th>
<td>
A3028967J
</td>
<td>
Braiden Henson
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
20.205
</td>
<td>
18.960
</td>
<td>
39.165
</td>
</tr>
<tr>
<th>
A1282849W
</th>
<td>
A1282849W
</td>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
13.470
</td>
<td>
17.440
</td>
<td>
30.910
</td>
</tr>
<tr>
<th>
A5408925A
</th>
<td>
A5408925A
</td>
<td>
Ronin Christian
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
18.366
</td>
<td>
15.560
</td>
<td>
33.926
</td>
</tr>
<tr>
<th>
A5410124H
</th>
<td>
A5410124H
</td>
<td>
Kyla Young
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
15.306
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A9568373Q
</th>
<td>
A9568373Q
</td>
<td>
Wyatt Oliver
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
12.246
</td>
<td>
14.088
</td>
<td>
26.334
</td>
</tr>
<tr>
<th>
A3202548I
</th>
<td>
A3202548I
</td>
<td>
Jaxon Chung
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
14.082
</td>
<td>
16.680
</td>
<td>
30.762
</td>
</tr>
<tr>
<th>
A7653832E
</th>
<td>
A7653832E
</td>
<td>
Quentin Kemp
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
NaN
</td>
<td>
15.720
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A9462811I
</th>
<td>
A9462811I
</td>
<td>
Leo Mayo
</td>
<td>
Physics
</td>
<td>
Female
</td>
<td>
20.817
</td>
<td>
14.680
</td>
<td>
35.497
</td>
</tr>
<tr>
<th>
A1218599T
</th>
<td>
A1218599T
</td>
<td>
Camden Williams
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
22.653
</td>
<td>
17.648
</td>
<td>
40.301
</td>
</tr>
<tr>
<th>
A7210476B
</th>
<td>
A7210476B
</td>
<td>
Sidney Wiggins
</td>
<td>
Physics
</td>
<td>
Non-binary
</td>
<td>
19.593
</td>
<td>
14.680
</td>
<td>
34.273
</td>
</tr>
<tr>
<th>
A1512479K
</th>
<td>
A1512479K
</td>
<td>
Solomon Fletcher
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
18.981
</td>
<td>
15.000
</td>
<td>
33.981
</td>
</tr>
<tr>
<th>
A7986368Y
</th>
<td>
A7986368Y
</td>
<td>
Riley Christensen
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
15.306
</td>
<td>
16.016
</td>
<td>
31.322
</td>
</tr>
<tr>
<th>
A2727061A
</th>
<td>
A2727061A
</td>
<td>
Malik Becker
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
12.858
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A2999472W
</th>
<td>
A2999472W
</td>
<td>
Skylar Hensley
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
23.877
</td>
<td>
17.648
</td>
<td>
41.525
</td>
</tr>
<tr>
<th>
A1643380L
</th>
<td>
A1643380L
</td>
<td>
Carolina Mcmahon
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
12.858
</td>
<td>
18.080
</td>
<td>
30.938
</td>
</tr>
<tr>
<th>
A6787293E
</th>
<td>
A6787293E
</td>
<td>
Elian Potter
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
23.265
</td>
<td>
14.360
</td>
<td>
37.625
</td>
</tr>
<tr>
<th>
A5975988J
</th>
<td>
A5975988J
</td>
<td>
Litzy White
</td>
<td>
Physics
</td>
<td>
Non-binary
</td>
<td>
20.817
</td>
<td>
15.920
</td>
<td>
36.737
</td>
</tr>
<tr>
<th>
A3699958T
</th>
<td>
A3699958T
</td>
<td>
Norah Miles
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
A1468689D
</th>
<td>
A1468689D
</td>
<td>
Isabela Stokes
</td>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
18.366
</td>
<td>
16.800
</td>
<td>
35.166
</td>
</tr>
<tr>
<th>
A3217320C
</th>
<td>
A3217320C
</td>
<td>
Kathleen Rodriguez
</td>
<td>
Physics
</td>
<td>
Male
</td>
<td>
22.653
</td>
<td>
17.760
</td>
<td>
40.413
</td>
</tr>
<tr>
<th>
A6867791C
</th>
<td>
A6867791C
</td>
<td>
Katie Ayers
</td>
<td>
Comp. Biology
</td>
<td>
Female
</td>
<td>
16.530
</td>
<td>
10.280
</td>
<td>
26.810
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Let’s create another mask for all the Chemistry students who identify as Female.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create mask</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> (df_class[<span class="st">"Major"</span>] <span class="op">==</span> <span class="st">"Chemistry"</span>) <span class="op">&amp;</span> (df_class[<span class="st">"Gender"</span>] <span class="op">==</span> <span class="st">'Female'</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using mask</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>df_class.loc[mask, [<span class="st">"Name"</span>, <span class="st">"Major"</span>, <span class="st">"Gender"</span>]]    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Gender
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A1282849W
</th>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A7653832E
</th>
<td>
Quentin Kemp
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A1218599T
</th>
<td>
Camden Williams
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A1512479K
</th>
<td>
Solomon Fletcher
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
</tr>
<tr>
<th>
A7986368Y
</th>
<td>
Riley Christensen
</td>
<td>
Chemistry
</td>
<td>
Female
</td>
</tr>
</tbody>
</table>
Cool right!
</li>
<li>
<p>Let’s do another one. How about all students who scored less than 15% on Test 1?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> df_class[<span class="st">"Test 1"</span>] <span class="op">&lt;</span> <span class="dv">15</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>df_class.loc[mask, [<span class="st">"Name"</span>, <span class="st">"Major"</span>, <span class="st">"Test 1"</span>]]   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Name
</th>
<th>
Major
</th>
<th>
Test 1
</th>
</tr>
<tr>
<th>
MATRIC_NO
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
A1282849W
</th>
<td>
Gustavo Vang
</td>
<td>
Chemistry
</td>
<td>
13.470
</td>
</tr>
<tr>
<th>
A9568373Q
</th>
<td>
Wyatt Oliver
</td>
<td>
Physics
</td>
<td>
12.246
</td>
</tr>
<tr>
<th>
A3202548I
</th>
<td>
Jaxon Chung
</td>
<td>
Physics
</td>
<td>
14.082
</td>
</tr>
<tr>
<th>
A2727061A
</th>
<td>
Malik Becker
</td>
<td>
Physics
</td>
<td>
12.858
</td>
</tr>
<tr>
<th>
A1643380L
</th>
<td>
Carolina Mcmahon
</td>
<td>
Physics
</td>
<td>
12.858
</td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</section>
<section id="the-magic-of-groupby" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="the-magic-of-groupby"><span class="header-section-number">4.3</span> The magic of <code>groupby()</code></h2>
<p>Let me show you how to use the mesmerising, <strong>extremely</strong> powerful function <code>groupby()</code>. It is absurd how simple some things become with the right tools.</p>
<p>Here are some examples.</p>
<div class="my-examples">
<ol>
<li>
<p>What are the means of the scores for the various test, according to Major?</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>]).mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
Major
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
Chemistry
</th>
<td>
18.7755
</td>
<td>
16.610286
</td>
<td>
35.534167
</td>
</tr>
<tr>
<th>
Comp. Biology
</th>
<td>
16.5300
</td>
<td>
10.280000
</td>
<td>
26.810000
</td>
</tr>
<tr>
<th>
Life Sciences
</th>
<td>
19.2420
</td>
<td>
14.690286
</td>
<td>
33.932286
</td>
</tr>
<tr>
<th>
Physics
</th>
<td>
17.7555
</td>
<td>
16.076800
</td>
<td>
34.567000
</td>
</tr>
</tbody>
</table>
<p>We use <code>numeric_only=True</code> to tell Pandas not to try evaluating a mean for non-numeric (‘Gender’ in this case) columns. However, I find this a tad annoying and non-intuitive for other (see <code>agg()</code> below) actions. So, I prefer to explicitly ask for the columns I want.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>])[[<span class="st">'Test 1'</span>, <span class="st">'Test 2'</span>, <span class="st">'Total'</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
<li>
<p>Let’s group-by <code>Major</code> and <code>Gender</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>, <span class="st">"Gender"</span>])[[<span class="st">'Test 1'</span>, <span class="st">'Test 2'</span>, <span class="st">'Total'</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
Major
</th>
<th>
Gender
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="3" valign="top">
Chemistry
</th>
<th>
Female
</th>
<td>
17.602500
</td>
<td>
16.364800
</td>
<td>
34.128500
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
21.121500
</td>
<td>
17.224000
</td>
<td>
38.345500
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Comp. Biology
</th>
<th>
Female
</th>
<td>
16.530000
</td>
<td>
10.280000
</td>
<td>
26.810000
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Life Sciences
</th>
<th>
Female
</th>
<td>
19.285875
</td>
<td>
14.801000
</td>
<td>
34.086875
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
20.357250
</td>
<td>
15.644000
</td>
<td>
36.001250
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
16.836000
</td>
<td>
12.340000
</td>
<td>
29.176000
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Physics
</th>
<th>
Female
</th>
<td>
20.817000
</td>
<td>
14.680000
</td>
<td>
35.497000
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
16.871000
</td>
<td>
16.498286
</td>
<td>
34.166143
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
20.205000
</td>
<td>
15.300000
</td>
<td>
35.505000
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If you don’t want the grouping parameters as indices, you can use <code>as_index=False</code>.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>, <span class="st">"Gender"</span>], as_index<span class="op">=</span><span class="va">False</span>)[[<span class="st">'Test 1'</span>, <span class="st">'Test 2'</span>, <span class="st">'Total'</span>]].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Major
</th>
<th>
Gender
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
Chemistry
</td>
<td>
Female
</td>
<td>
17.602500
</td>
<td>
16.364800
</td>
<td>
34.128500
</td>
</tr>
<tr>
<th>
1
</th>
<td>
Chemistry
</td>
<td>
Male
</td>
<td>
21.121500
</td>
<td>
17.224000
</td>
<td>
38.345500
</td>
</tr>
<tr>
<th>
2
</th>
<td>
Chemistry
</td>
<td>
Non-binary
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
3
</th>
<td>
Comp. Biology
</td>
<td>
Female
</td>
<td>
16.530000
</td>
<td>
10.280000
</td>
<td>
26.810000
</td>
</tr>
<tr>
<th>
4
</th>
<td>
Comp. Biology
</td>
<td>
Male
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
5
</th>
<td>
Comp. Biology
</td>
<td>
Non-binary
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
6
</th>
<td>
Life Sciences
</td>
<td>
Female
</td>
<td>
19.285875
</td>
<td>
14.801000
</td>
<td>
34.086875
</td>
</tr>
<tr>
<th>
7
</th>
<td>
Life Sciences
</td>
<td>
Male
</td>
<td>
20.357250
</td>
<td>
15.644000
</td>
<td>
36.001250
</td>
</tr>
<tr>
<th>
8
</th>
<td>
Life Sciences
</td>
<td>
Non-binary
</td>
<td>
16.836000
</td>
<td>
12.340000
</td>
<td>
29.176000
</td>
</tr>
<tr>
<th>
9
</th>
<td>
Physics
</td>
<td>
Female
</td>
<td>
20.817000
</td>
<td>
14.680000
</td>
<td>
35.497000
</td>
</tr>
<tr>
<th>
10
</th>
<td>
Physics
</td>
<td>
Male
</td>
<td>
16.871000
</td>
<td>
16.498286
</td>
<td>
34.166143
</td>
</tr>
<tr>
<th>
11
</th>
<td>
Physics
</td>
<td>
Non-binary
</td>
<td>
20.205000
</td>
<td>
15.300000
</td>
<td>
35.505000
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If you are only interested in a specific column, you can do this:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>, <span class="st">"Gender"</span>])[<span class="st">"Test 1"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
</th>
<th>
Test 1
</th>
</tr>
<tr>
<th>
Major
</th>
<th>
Gender
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="3" valign="top">
Chemistry
</th>
<th>
Female
</th>
<td>
17.602500
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
21.121500
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Comp. Biology
</th>
<th>
Female
</th>
<td>
16.530000
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
NaN
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Life Sciences
</th>
<th>
Female
</th>
<td>
19.285875
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
20.357250
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
16.836000
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Physics
</th>
<th>
Female
</th>
<td>
20.817000
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
16.871000
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
20.205000
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Other ‘in-built’ function you can use are <code>count()</code>, <code>sum()</code>, <code>mean()</code>, <code>median()</code>, <code>min()</code>, <code>max()</code>, <code>mode()</code>, <code>std()</code>, <code>var()</code>. However, you can far more out of <code>groupby()</code> by using <code>agg()</code> to apply any function. Let me show you how to apply some functions from NumPy.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Major"</span>, <span class="st">"Gender"</span>])[[<span class="st">'Test 1'</span>, <span class="st">'Test 2'</span>, <span class="st">'Total'</span>]].agg([np.mean, np.std]).<span class="bu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
</th>
<th colspan="2" halign="left">
Test 1
</th>
<th colspan="2" halign="left">
Test 2
</th>
<th colspan="2" halign="left">
Total
</th>
</tr>
<tr>
<th>
</th>
<th>
</th>
<th>
mean
</th>
<th>
std
</th>
<th>
mean
</th>
<th>
std
</th>
<th>
mean
</th>
<th>
std
</th>
</tr>
<tr>
<th>
Major
</th>
<th>
Gender
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="3" valign="top">
Chemistry
</th>
<th>
Female
</th>
<td>
17.60
</td>
<td>
4.07
</td>
<td>
16.36
</td>
<td>
1.14
</td>
<td>
34.13
</td>
<td>
4.33
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
21.12
</td>
<td>
3.90
</td>
<td>
17.22
</td>
<td>
0.60
</td>
<td>
38.35
</td>
<td>
4.50
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Comp. Biology
</th>
<th>
Female
</th>
<td>
16.53
</td>
<td>
NaN
</td>
<td>
10.28
</td>
<td>
NaN
</td>
<td>
26.81
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Life Sciences
</th>
<th>
Female
</th>
<td>
19.29
</td>
<td>
2.07
</td>
<td>
14.80
</td>
<td>
2.61
</td>
<td>
34.09
</td>
<td>
3.84
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
20.36
</td>
<td>
4.37
</td>
<td>
15.64
</td>
<td>
1.49
</td>
<td>
36.00
</td>
<td>
4.95
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
16.84
</td>
<td>
2.16
</td>
<td>
12.34
</td>
<td>
1.90
</td>
<td>
29.18
</td>
<td>
0.27
</td>
</tr>
<tr>
<th rowspan="3" valign="top">
Physics
</th>
<th>
Female
</th>
<td>
20.82
</td>
<td>
NaN
</td>
<td>
14.68
</td>
<td>
NaN
</td>
<td>
35.50
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Male
</th>
<td>
16.87
</td>
<td>
4.35
</td>
<td>
16.50
</td>
<td>
1.89
</td>
<td>
34.17
</td>
<td>
5.15
</td>
</tr>
<tr>
<th>
Non-binary
</th>
<td>
20.20
</td>
<td>
0.87
</td>
<td>
15.30
</td>
<td>
0.88
</td>
<td>
35.50
</td>
<td>
1.74
</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You can even combine <code>groupby()</code> with a mask. For example, let’s see how all the Female students are doing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> df_class[<span class="st">'Gender'</span>] <span class="op">==</span> <span class="st">'Female'</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>df_class[mask].groupby(by<span class="op">=</span>[<span class="st">'Major'</span>]).mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
Major
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
Chemistry
</th>
<td>
17.602500
</td>
<td>
16.3648
</td>
<td>
34.128500
</td>
</tr>
<tr>
<th>
Comp. Biology
</th>
<td>
16.530000
</td>
<td>
10.2800
</td>
<td>
26.810000
</td>
</tr>
<tr>
<th>
Life Sciences
</th>
<td>
19.285875
</td>
<td>
14.8010
</td>
<td>
34.086875
</td>
</tr>
<tr>
<th>
Physics
</th>
<td>
20.817000
</td>
<td>
14.6800
</td>
<td>
35.497000
</td>
</tr>
</tbody>
</table>
<p>Just for comparison,</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>df_class.groupby(by<span class="op">=</span>[<span class="st">"Gender"</span>, <span class="st">"Major"</span>]).mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
</th>
<th>
Test 1
</th>
<th>
Test 2
</th>
<th>
Total
</th>
</tr>
<tr>
<th>
Gender
</th>
<th>
Major
</th>
<th>
</th>
<th>
</th>
<th>
</th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="4" valign="top">
Female
</th>
<th>
Chemistry
</th>
<td>
17.602500
</td>
<td>
16.364800
</td>
<td>
34.128500
</td>
</tr>
<tr>
<th>
Comp. Biology
</th>
<td>
16.530000
</td>
<td>
10.280000
</td>
<td>
26.810000
</td>
</tr>
<tr>
<th>
Life Sciences
</th>
<td>
19.285875
</td>
<td>
14.801000
</td>
<td>
34.086875
</td>
</tr>
<tr>
<th>
Physics
</th>
<td>
20.817000
</td>
<td>
14.680000
</td>
<td>
35.497000
</td>
</tr>
<tr>
<th rowspan="4" valign="top">
Male
</th>
<th>
Chemistry
</th>
<td>
21.121500
</td>
<td>
17.224000
</td>
<td>
38.345500
</td>
</tr>
<tr>
<th>
Comp. Biology
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Life Sciences
</th>
<td>
20.357250
</td>
<td>
15.644000
</td>
<td>
36.001250
</td>
</tr>
<tr>
<th>
Physics
</th>
<td>
16.871000
</td>
<td>
16.498286
</td>
<td>
34.166143
</td>
</tr>
<tr>
<th rowspan="4" valign="top">
Non-binary
</th>
<th>
Chemistry
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Comp. Biology
</th>
<td>
NaN
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
Life Sciences
</th>
<td>
16.836000
</td>
<td>
12.340000
</td>
<td>
29.176000
</td>
</tr>
<tr>
<th>
Physics
</th>
<td>
20.205000
</td>
<td>
15.300000
</td>
<td>
35.505000
</td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>